!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=11)}([function(a,b,c){c(2),function(a){var b;menuIcons.activeTypes&&!_.isEmpty(menuIcons.activeTypes)&&(b={templates:{},wrapClass:"div.oe-icons-wrap",frame:null,target:new wp.media.model.IconPickerTarget,typesFilter:function(b){return a.inArray(b.id,menuIcons.activeTypes)>=0},createFrame:function(){b.frame=new wp.media.view.MediaFrame.MenuIcons({target:b.target,ipTypes:_.filter(iconPicker.types,b.typesFilter),SidebarView:wp.media.view.MenuIconsSidebar})},pickIcon:function(a){b.frame.target.set(a,{silent:!0}),b.frame.open()},setUnset:function(c){var d=a(c.currentTarget),e=a(c.target);c.preventDefault(),e.hasClass("_select")||e.hasClass("_icon")?b.setIcon(d):e.hasClass("_remove")&&b.unsetIcon(d)},setIcon:function(c){var d=c.data("id"),e=b.frame,f=e.menuItems,g=f.get(d);return g?void b.pickIcon(g.toJSON()):(g={id:d,$el:c,$title:a("#edit-menu-item-title-"+d),$inputs:{}},c.find("div._settings input").each(function(){var b=a(this),c=b.attr("class").replace("_oe-",""),d=b.val();d||(_.has(menuIcons.menuSettings,c)?d=menuIcons.menuSettings[c]:_.has(menuIcons.settingsFields,c)&&(d=menuIcons.settingsFields[c]["default"])),g[c]=d,g.$inputs[c]=b}),f.add(g),void b.pickIcon(g))},unsetIcon:function(a){var c=a.data("id");a.find("div._settings input").val(""),a.trigger("mi:update"),b.frame.menuItems.remove(c)},updateField:function(c){var d,e=a(c.currentTarget),f=e.find("a._select"),g=e.find("a._remove"),h=e.find("input._oe-type").val(),i=e.find("input._oe-icon").val(),j=e.find("input._oe-url").val();return""===h||""===i||_.indexOf(menuIcons.activeTypes,h)<0?(f.text(menuIcons.text.select).attr("title",""),void g.addClass("hidden")):(d=b.templates[h]?b.templates[h]:b.templates[h]=wp.template("oe-icons-item-field-preview-"+iconPicker.types[h].templateId),g.removeClass("hidden"),f.attr("title",menuIcons.text.change),void f.html(d({type:h,icon:i,url:j})))},init:function(){b.createFrame(),a(document).on("click",b.wrapClass,b.setUnset).on("mi:update",b.wrapClass,b.updateField),a(b.wrapClass).trigger("mi:update")}},b.init())}(jQuery)},function(a,b){!function(a){a("#oe-icons-settings-tabs").on("click","a.oe-settings-nav-tab",function(b){var c=a(this).blur(),d=a("#"+c.data("type"));b.preventDefault(),b.stopPropagation(),c.parent().addClass("tabs").siblings().removeClass("tabs"),d.removeClass("tabs-panel-inactive").addClass("tabs-panel-active").show().siblings("div.tabs-panel").hide().addClass("tabs-panel-inactive").removeClass("tabs-panel-active")}).find("a.oe-settings-nav-tab").first().click(),a("#oe-icons-settings-save").on("click",function(b){var c=a(this).prop("disabled",!0),d=c.siblings("span.spinner");b.preventDefault(),b.stopPropagation(),d.css({display:"inline-block",visibility:"visible"}),a.ajax({type:"POST",url:window.menuIcons.ajaxUrls.update,data:a("#oe-icons-settings :input").serialize(),success:function(a){!0===a.success&&a.data.redirectUrl?window.location=a.data.redirectUrl:c.prop("disabled",!1)},always:function(){d.hide()}})})}(jQuery)},function(a,b,c){wp.media.model.MenuIconsItemSettingField=c(3),wp.media.model.MenuIconsItemSettings=c(4),wp.media.model.MenuIconsItem=c(5),wp.media.view.MenuIconsItemSettingField=c(8),wp.media.view.MenuIconsItemSettings=c(9),wp.media.view.MenuIconsItemPreview=c(7),wp.media.view.MenuIconsSidebar=c(10),wp.media.view.MediaFrame.MenuIcons=c(6)},function(a,b){var c=Backbone.Model.extend({defaults:{id:"",label:"",value:"",type:"text"}});a.exports=c},function(a,b){var c=Backbone.Collection.extend({model:wp.media.model.MenuIconsItemSettingField});a.exports=c},function(a,b){var c=Backbone.Model.extend({initialize:function(){this.on("change",this.updateValues,this)},updateValues:function(){_.each(this.get("$inputs"),function(a,b){a.val(this.get(b))},this),this.get("$el").trigger("mi:update")}});a.exports=c},function(a,b){var c=wp.media.view.MediaFrame.IconPicker.extend({initialize:function(){this.menuItems=new Backbone.Collection([],{model:wp.media.model.MenuIconsItem}),wp.media.view.MediaFrame.IconPicker.prototype.initialize.apply(this,arguments),this.listenTo(this.target,"change",this.miUpdateItemProps),this.on("select",this.miClearTarget,this)},miUpdateItemProps:function(a){var b=this.menuItems.get(a.id);b.set(a.changed)},miClearTarget:function(){this.target.clear({silent:!0})}});a.exports=c},function(a,b){var c=wp.media.View.extend({tagName:"p",className:"oe-preview menu-item attachment-info",events:{"click a":"preventDefault"},initialize:function(){wp.media.View.prototype.initialize.apply(this,arguments),this.model.on("change",this.render,this)},render:function(){var a=this.controller,b=a.state(),c=b.get("selection").single(),d=this.model.toJSON(),e=_.extend(d,{type:b.id,icon:c.id,title:this.model.get("$title").val(),url:b.ipGetIconUrl(c,d.image_size)}),f="oe-icons-item-sidebar-preview-"+iconPicker.types[b.id].templateId+"-";return f+=e.hide_label?"hide_label":e.position,this.template=wp.media.template(f),this.$el.html(this.template(e)),this},preventDefault:function(a){a.preventDefault()}});a.exports=c},function(a,b){var c,d=jQuery;c=wp.media.View.extend({tagName:"label",className:"setting",events:{"change :input":"_update"},initialize:function(){wp.media.View.prototype.initialize.apply(this,arguments),this.template=wp.media.template("oe-icons-settings-field-"+this.model.get("type")),this.model.on("change",this.render,this)},prepare:function(){return this.model.toJSON()},_update:function(a){var b=d(a.currentTarget).val();this.model.set("value",b),this.options.item.set(this.model.id,b)}}),a.exports=c},function(a,b){var c=wp.media.view.PriorityList.extend({className:"oe-settings attachment-info",prepare:function(){_.each(this.collection.map(this.createField,this),function(a){this.set(a.model.id,a)},this)},createField:function(a){var b=new wp.media.view.MenuIconsItemSettingField({item:this.model,model:a,collection:this.collection});return b}});a.exports=c},function(a,b){var c=wp.media.view.IconPickerSidebar.extend({initialize:function(){var a=new wp.media.View({tagName:"h3",priority:-10});new wp.media.View({tagName:"p",className:"_info",priority:1e3});wp.media.view.IconPickerSidebar.prototype.initialize.apply(this,arguments),a.$el.text(window.menuIcons.text.preview),this.set("title",a)},createSingle:function(){this.createPreview(),this.createSettings()},disposeSingle:function(){this.unset("preview"),this.unset("settings")},createPreview:function(){var a=this,b=a.controller,c=b.state();return c.dfd&&"pending"===c.dfd.state()?void c.dfd.done(function(){a.createPreview()}):void a.set("preview",new wp.media.view.MenuIconsItemPreview({controller:b,model:b.target,priority:80}))},createSettings:function(){var a=this.controller,b=a.state(),c=b.get("data").settingsFields,d=[];_.each(c,function(b){var c,e=window.menuIcons.settingsFields[b];e&&(c=_.defaults({value:a.target.get(b)||e["default"]},e),d.push(c))}),d.length&&this.set("settings",new wp.media.view.MenuIconsItemSettings({controller:this.controller,collection:new wp.media.model.MenuIconsItemSettings(d),model:a.target,type:this.options.type,priority:120}))}});a.exports=c},function(a,b,c){c(1),c(0)}]);